# 2019-03-10 18:17:37
#---------------------------------------------------#
## é…ç½®æ–‡ä»¶éœ€è¦æ”¾ç½®åœ¨ $HOME/.config/clash/config.yml
## 
## å¦‚æœæ‚¨ä¸çŸ¥é“å¦‚ä½•æ“ä½œï¼Œè¯·å‚é˜… SS-Rule-Snippet çš„ Wikiï¼š https://github.com/Hackl0us/SS-Rule-Snippet/wiki/clash(X)
#---------------------------------------------------#

# HTTP ä»£ç†ç«¯å£
port: 7890

# SOCKS5 ä»£ç†ç«¯å£
socks-port: 7891

# Linux å’Œ macOS çš„ redir ä»£ç†ç«¯å£ (å¦‚éœ€ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œè¯·å–æ¶ˆæ³¨é‡Š)
# redir-port: 7892

# å…è®¸å±€åŸŸç½‘çš„è¿æ¥ï¼ˆå¯ç”¨æ¥å…±äº«ä»£ç†ï¼‰
allow-lan: false

# è§„åˆ™æ¨¡å¼ï¼šRuleï¼ˆè§„åˆ™ï¼‰ / Globalï¼ˆå…¨å±€ä»£ç†ï¼‰/ Directï¼ˆå…¨å±€ç›´è¿ï¼‰
mode: Rule

# è®¾ç½®æ—¥å¿—è¾“å‡ºçº§åˆ« (é»˜è®¤çº§åˆ«ï¼šsilentï¼Œå³ä¸è¾“å‡ºä»»ä½•å†…å®¹ï¼Œä»¥é¿å…å› æ—¥å¿—å†…å®¹è¿‡å¤§è€Œå¯¼è‡´ç¨‹åºå†…å­˜æº¢å‡ºï¼‰ã€‚
# 5 ä¸ªçº§åˆ«ï¼šsilent / info / warning / error / debugã€‚çº§åˆ«è¶Šé«˜æ—¥å¿—è¾“å‡ºé‡è¶Šå¤§ï¼Œè¶Šå€¾å‘äºè°ƒè¯•ï¼Œè‹¥éœ€è¦è¯·è‡ªè¡Œå¼€å¯ã€‚
log-level: info

# clash çš„ RESTful API
external-controller: 127.0.0.1:9090

# æ‚¨å¯ä»¥å°†é™æ€ç½‘é¡µèµ„æºï¼ˆå¦‚ clash-dashboardï¼‰æ”¾ç½®åœ¨ä¸€ä¸ªç›®å½•ä¸­ï¼Œclash å°†ä¼šæœåŠ¡äº `${API}/ui`
# å‚æ•°åº”å¡«å†™é…ç½®ç›®å½•çš„ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ã€‚
# external-ui: folder

# RESTful API çš„å£ä»¤ (å¯é€‰)
secret: ""

dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  nameserver:
     - 1.2.4.8
     - 114.114.114.114
     - 223.5.5.5
     - tls://dns.rubyfish.cn:853
     
  fallback: # ä¸ nameserver å†…çš„æœåŠ¡å™¨åˆ—è¡¨åŒæ—¶å‘èµ·è¯·æ±‚ï¼Œå½“è§„åˆ™ç¬¦åˆ GEOIP åœ¨ CN ä»¥å¤–æ—¶ï¼Œfallback åˆ—è¡¨å†…çš„åŸŸåæœåŠ¡å™¨ç”Ÿæ•ˆã€‚
     - tls://dns.rubyfish.cn:853
     - tls://dns.google

# clash DNS è¯·æ±‚é€»è¾‘ï¼š
# (1) å½“è®¿é—®ä¸€ä¸ªåŸŸåæ—¶ï¼Œ nameserver ä¸ fallback åˆ—è¡¨å†…çš„æ‰€æœ‰æœåŠ¡å™¨å¹¶å‘è¯·æ±‚ï¼Œå¾—åˆ°åŸŸåå¯¹åº”çš„ IP åœ°å€ã€‚
# (2) clash å°†é€‰å– nameserver åˆ—è¡¨å†…ï¼Œè§£ææœ€å¿«çš„ç»“æœã€‚
# (3) è‹¥è§£æç»“æœä¸­ï¼ŒIP åœ°å€å±äº å›½å¤–ï¼Œé‚£ä¹ˆ clash å°†é€‰æ‹© fallback åˆ—è¡¨å†…ï¼Œè§£ææœ€å¿«çš„ç»“æœã€‚
#
# å› æ­¤ï¼Œæˆ‘åœ¨ nameserver å’Œ fallback å†…éƒ½æ”¾ç½®äº†æ— æ±¡æŸ“ã€è§£æé€Ÿåº¦è¾ƒå¿«çš„å›½å†… DNS æœåŠ¡å™¨ï¼Œä»¥è¾¾åˆ°æœ€å¿«çš„è§£æé€Ÿåº¦ã€‚
# ä½†æ˜¯ fallback åˆ—è¡¨å†…æœåŠ¡å™¨ä¼šç”¨åœ¨è§£æå¢ƒå¤–ç½‘ç«™ï¼Œä¸ºäº†ç»“æœç»å¯¹æ— æ±¡æŸ“ï¼Œæˆ‘ä»…ä¿ç•™äº†æ”¯æŒ DoT/DoH çš„ä¸¤ä¸ªæœåŠ¡å™¨ã€‚
# 
# æ³¨æ„ï¼š
# (1) å¦‚æœæ‚¨ä¸ºäº†ç¡®ä¿ DNS è§£æç»“æœæ— æ±¡æŸ“ï¼Œè¯·ä»…ä¿ç•™åˆ—è¡¨å†…ä»¥ tls:// å¼€å¤´çš„ DNS æœåŠ¡å™¨ï¼Œä½†æ˜¯é€šå¸¸å¯¹äºå›½å†…æ²¡æœ‰å¤ªå¤§å¿…è¦ã€‚
# (2) å¦‚æœæ‚¨ä¸åœ¨ä¹å¯èƒ½è§£æåˆ°æ±¡æŸ“çš„ç»“æœï¼Œæ›´åŠ è¿½æ±‚é€Ÿåº¦ã€‚è¯·å°† nameserver åˆ—è¡¨çš„æœåŠ¡å™¨æ’å…¥è‡³ fallback åˆ—è¡¨å†…ï¼Œå¹¶ç§»é™¤é‡å¤é¡¹ã€‚

proxies:

# shadowsocks
# æ‰€æ”¯æŒçš„åŠ å¯†æ–¹å¼ä¸ go-shadowsocks2 ä¿æŒä¸€è‡´
# æ”¯æŒåŠ å¯†æ–¹å¼ï¼š AEAD_AES_128_GCM AEAD_AES_192_GCM AEAD_AES_256_GCM AEAD_CHACHA20_POLY1305 AES-128-CTR AES-192-CTR AES-256-CTR AES-128-CFB AES-192-CFB AES-256-CFB CHACHA20-IETF XCHACHA20 
# clash é¢å¤–æ”¯æŒ chacha20 rc4-md5 xchacha20-ietf-poly1305 åŠ å¯†æ–¹å¼

#  http
  - name: ğŸµ è§£é”èŠ‚ç‚¹
    type: http
    server: [your ip. e.g. 127.0.0.1]
    port: [your port. e.g. 80]

proxy-groups:
  - name: UnblockNeteaseMusic
    type: select
    proxies: 
      - ğŸµ è§£é”èŠ‚ç‚¹

rules:
# è‡ªå®šä¹‰è§„åˆ™
## æ‚¨å¯ä»¥åœ¨æ­¤å¤„æ’å…¥æ‚¨è¡¥å……çš„è‡ªå®šä¹‰è§„åˆ™
#- PROCESS-NAME,com.netease.cloudmusic,UnblockNeteaseMusic
  # Netease Music Advertising
  - DOMAIN,admusicpic.music.126.net,REJECT
  - DOMAIN,iadmat.nosdn.127.net,REJECT
  - DOMAIN,iadmusicmat.music.126.net,REJECT
  - DOMAIN,iadmusicmatvideo.music.126.net,REJECT
  
  # UnblockNeteaseMusic
  - DOMAIN,api.iplay.163.com,UnblockNeteaseMusic
  - DOMAIN,apm3.music.163.com,UnblockNeteaseMusic
  - DOMAIN,apm.music.163.com,UnblockNeteaseMusic
  - DOMAIN,interface3.music.163.com,UnblockNeteaseMusic
  - DOMAIN,interface3.music.163.com.163jiasu.com,UnblockNeteaseMusic
  - DOMAIN,interface.music.163.com,UnblockNeteaseMusic
  - DOMAIN,music.163.com,UnblockNeteaseMusic
  - IP-CIDR,39.105.63.80/32,UnblockNeteaseMusic
  - IP-CIDR,39.105.175.128/32,UnblockNeteaseMusic
  - IP-CIDR,45.254.48.1/32,UnblockNeteaseMusic
  - IP-CIDR,47.100.127.239/32,UnblockNeteaseMusic
  - IP-CIDR,59.111.160.195/32,UnblockNeteaseMusic
  - IP-CIDR,59.111.160.197/32,UnblockNeteaseMusic
  - IP-CIDR,59.111.181.35/32,UnblockNeteaseMusic
  - IP-CIDR,59.111.181.38/32,UnblockNeteaseMusic
  - IP-CIDR,59.111.181.60/32,UnblockNeteaseMusic
  - IP-CIDR,101.71.154.241/32,UnblockNeteaseMusic
  - IP-CIDR,103.126.92.132/32,UnblockNeteaseMusic
  - IP-CIDR,103.126.92.133/32,UnblockNeteaseMusic
  - IP-CIDR,112.13.119.17/32,UnblockNeteaseMusic
  - IP-CIDR,112.13.119.18/32,UnblockNeteaseMusic
  - IP-CIDR,112.13.122.1/32,UnblockNeteaseMusic
  - IP-CIDR,112.13.122.4/32,UnblockNeteaseMusic
  - IP-CIDR,115.236.118.33/32,UnblockNeteaseMusic
  - IP-CIDR,115.236.121.1/32,UnblockNeteaseMusic
  - IP-CIDR,118.24.63.156/32,UnblockNeteaseMusic
  - IP-CIDR,182.92.170.253/32,UnblockNeteaseMusic
  - IP-CIDR,193.112.159.225/32,UnblockNeteaseMusic
  - IP-CIDR,223.252.199.66/32,UnblockNeteaseMusic
  - IP-CIDR,223.252.199.67/32,UnblockNeteaseMusic

  # æœ€ç»ˆè§„åˆ™
  # - GEOIP,CN,DIRECT
  - MATCH,DIRECT